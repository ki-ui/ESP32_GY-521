# ESP32_GY-521
ESP32でGY-521を動作させる際のキャリブレーションから動作サンプルまでの一連の流れです。  

1.キャリブレーションと動作サンプルを入手  
ライブラリマネージャーからmpu6050で検索すると出てくる以下のライブラリを導入  
https://github.com/ElectronicCats/mpu6050  
  
2.スケッチ例からIMU_Zeroを選択  
ESP32に非対応のスケッチとなっているが問題なし  

3.スケッチの編集を行う  
ESP32のSerialに合わせるため、Serial.beginを115200に変更  

4.ハードウェアの配線を行う  
SCLを22、SDAを21に配線  
VCCはESP32の5V出力からの給電で問題なし  

5.スケッチを書き込む  
スケッチを書き込み、ESP32再起動  
再起動後、シリアルモニタがdoneの表示になるまで、GY-521をなるべく水平に保つ  
done後にキャリブレーションのためのオフセット値が表示される  

6.キャリブレーションのためのオフセット値を確認する  
XAccel			YAccel				ZAccel			XGyro			YGyro			ZGyro  
[-3458,-3456] --> [-8,10]	[2836,2838] --> [-17,1]	[828,829] --> [16380,16386]	[8,9] --> [-3,1]	[42,43] --> [-1,2]	[-25,-24] --> [-1,2]  
[-3457,-3456] --> [-6,10]	[2837,2838] --> [-15,1]	[828,829] --> [16381,16386]	[8,9] --> [-3,1]	[42,43] --> [-1,2]	[-25,-24] --> [-1,2]  
[-3457,-3456] --> [-9,10]	[2837,2838] --> [-16,1]	[828,829] --> [16383,16386]	[8,9] --> [-3,1]	[42,43] --> [-1,2]	[-25,-24] --> [-1,2]  
上記のような表示がされているはずなので、確認する  
[hoge,fuga] ---> [foo,bar]のfugeの部分がオフセット値で、左から「X加速度、Y加速度、Z加速度、Xジャイロ、Yジャイロ、Zジャイロ」のオフセット値となっている  
今回だと、-3456がX加速度、2838がY加速度のオフセット値となっている  
これらの値をハードコーディングすることで、正確なセンサ値を読み込むことができる  

7.動作サンプルを動かす  
スケッチ例からMPU6050_rawで単純な値の読み込みが可能  
ESP32の場合、Serial.beginを115200に変更する必要がある  
上記のスケッチを参考に作成したのが本レポジトリのプログラムである  
また、シリアルプロット機能を利用することで、センサの可視化が行える  
